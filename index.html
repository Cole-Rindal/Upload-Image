<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Upload-Image</title>
</head>

<body>
  <main>

    <input id="imgUpload" type="file" accept="image/*">

    <img src="placeholder.png" id="imgPreview" alt="temp" width="400" height="400" referrerpolicy="no-referrer">

    <script>
      const imgUpload = document.getElementById("imgUpload");
      const imgPreview = document.getElementById("imgPreview");
      imgUpload.addEventListener("change", (event) => {
        const formData = new FormData()
        formData.append("image", event.target.files[0])
        fetch("https://api.imgur.com/3/upload", 
        {
          method: "post",
          headers: {
            Authorization: ${{ secrets.IMGUR_API_KEY }}
          },
          body: formData,
          mode: "no-cors"
        }).then(data => data.json()).then(data => {
          imgPreview.src = data.data.link
          imgPreview.alt = data.data.link
        })
      });
    </script>

  </main>
</body>

</html>